<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QuestionIII</title>
</head>

<body>
    <script>
        let data = [197,130,1] //example data
        let len = data.length

        let validUtf8 = function (data) {
            function fn(num) {
                let str = num.toString(2);
                console.log(str)
                while (str.length !== 8)
                    str = '0' + str;
                    // console.log(str)
                return str;
            }

            for (let i = 0; i < len; i++) {
                let str = fn(data[i]);

                if (str.startsWith('0'))
                    continue;
                else if (str.startsWith("110")) {
                    if (i + 1 >= len)
                        return false;
                    let a = fn(data[i + 1]);
                    if (a.startsWith("10"))
                        i += 1;
                    else
                        return false;
                } else if (str.startsWith("1110")) {
                    if (i + 2 >= len)
                        return false;
                    let a = fn(data[i + 1]);
                    let b = fn(data[i + 2]);
                    if (a.startsWith("10") && b.startsWith("10"))
                        i += 2;
                    else
                        return false;
                } else if (str.startsWith("11110")) {
                    if (i + 3 >= len)
                        return false;
                    let a = fn(data[i + 1]);
                    let b = fn(data[i + 2]);
                    let c = fn(data[i + 3]);
                    if (a.startsWith("10") && b.startsWith("10") && c.startsWith("10"))
                        i += 3;
                    else
                        return false;
                } else
                    return false;
            }

            return true;
        };
        console.log(validUtf8(data))
    </script>
</body>

</html>